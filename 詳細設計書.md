# OJT課題「オセロゲーム」 詳細設計書


## 変更履歴
|日付|版|説明|作成者/変更者|
|:---|:---|:---|:---|
|2022/11/24|1.0|初版|後藤政允|



## 目次
- [はじめに](#はじめに)
  - [本書の目的](#本書の目的)
  - [本書の記述内容](#本書の記述内容)
- [詳細設計仕様](#詳細設計仕様)
  - [状態遷移図](#状態遷移図)
  - [シーケンス図](#シーケンス図)
- [関数定義](#関数定義)
  - [define定義](#define定義)
  - [内部関数定義](#内部関数定義)
- [未決定事項](#未決定事項)


## はじめに
### 本書の目的


### 本書の記述内容
 

## 詳細設計仕様
* othello.c：メイン関数を扱うファイル。

* section.c：開始前、実行中、終了時の各セクションを担う関数を扱うファイル。

* board.c：オセロ盤の情報に依存する関数を扱うファイル。

* not_board.c：オセロ盤の情報に依存しない関数を扱うファイル。


## 関数定義
### define定義
* 真偽の定数  
FALSE　0  
TRUE　 1
* 石  
WHITE_STONE　'0'  
BLACK_STONE　'1'  
BLANK　　　　 '9'
* ファイル名  
FILE_NAME　"savedata.txt"
* セーブデータのサイズ  
SAVEDATA_SIZE　65
* 初期盤面を表すデータ  
INITIAL_PLACEMENT　"B9999999999999999999999999990199999910999999999999999999999999999"

### グローバル変数定義
* board
  |型|要素数|概要|
  |:---|:---|:---|
  |char[]|SAVEDATA_SIZE＋1|オセロ盤を表す配列。初期値はINITIAL＿PLACEMENT。|

### 内部関数定義
- othello.c
  - main()  
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|int|-|-|
    * 処理の流れ  
      1. opening_game()を呼び出す。
      2. playing_game()を呼び出す。
      3. 戻り値がTRUEになるまで、2.を繰り返す。
      4. closing_game()を呼び出す。
      5. プログラムを終了する。

- section.c
  - opening_game()：ゲーム開始部分の流れ
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|void|-|-|
    * 処理の流れ１：セーブデータがない場合
      1. savedata_exicetence()を呼び出す。
      2．FALSEが返ってくる。
      3. display_board()を呼び出す。
    * 処理の流れ２：セーブデータが有り、はじめから始める場合
      1. savedata_exicetence()を呼び出す。
      2．TRUEが返ってくる。
      3. display_board()を呼び出す。
    * 処理の流れ３：セーブデータが有り、つづきから始める場合
      1. savedata_exicetence()を呼び出す。
      2．TRUEが返ってくる。
      3. savedata_content()を呼び出す。
      4. 
      3. display_board()を呼び出す。
  
  - playing_game()：ゲームの1ターンの流れ
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|int|-|ゲーム終了時にTRUE、それ以外はFALSEを返す。|
    
  - closing_game()：ゲーム終了時の流れ
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|void|-|-|

- board.c
  - savedata_existence()：セーブデータの有無を確認
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|int|-|セーブデータが存在する場合はTRUE、ない場合はFALSEを返す。|
  
  - savedata_content()：セーブデータの中身を確認
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|int|-|セーブデータに異常がない場合はTRUE、ある場合はFALSEを返す。|
  
  - investigate_stone_place()：石を置ける場所を調べる
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|int*|possible_place|石を置ける場所の要素番号の配列。|
      |戻り値|int|-|置ける場所がある場合はTRUE、ない場合はFALSEを返す。|
  
  - turnover_stone()：はさんだ石をひっくり返す
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|int|decide_place|石を置いた場所の要素番号。|
      |戻り値|void|-|-|
  
  - data_save()：データをセーブする
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|void|-|-|
  
  - display_board()：オセロ盤を表示する
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|void|-|-|
  
  - stone_num()：石の数を調べる
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|char|stone_type|BLACK_STONEかWHITE_STONE|
      |戻り値|int|cnt|盤上の石の数|

- not_board.c
  - confirm_stone_input()：石を置く場所の入力内容の整合性を確認
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|char*|input|石を置く場所の入力内容。|
      |戻り値|int|element_num|入力内容が正しい場合はその場所の要素番号、正しくない場合はFALSEを返す。|
  
  - show_winner()：勝者を表示
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数１|int|black_stone_num|盤上の黒い石の数|
      |引数２|int|white_stone_num|盤上の白い石の数|
      |戻り値|void|-|-|
  
  - remove_data()：ファイルを削除する
    * 関数仕様
      ||型|変数名|概要|
      |:---|:---|:---|:---|
      |引数|-|-|-|
      |戻り値|void|-|-|

## 未決定事項
特になし。
